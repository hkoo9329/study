

# 스프링 부트 정리 (스프링 부트 시작하기 책 정리글)

# 목차

- 2장
  - [파일구조의 의미](#파일구조의-의미)
  - [어노테이션 설명](#어노테이션-설명)
    - @RestController
    - @RequestMapping
    - @SpringBootApplication
  - [SampleApplication 클래스](#SampleApplication-클래스)
    - @SpringBootApplication
      - @EnableAutoConfiguration
      - @ComponentScan
      - @Configuration
- 3장
  - [스프링 프레임워크란?](#스프링-프레임워크란?)
  - [MVC 패턴 및 스프링 MVC](#MVC-패턴-및-스프링-MVC)
    - 스프링 웹 MVC의 구조
    - 일반적으로 사용하는 스프링 MVC의 구조
  - [MyBatis](#MyBatis)
    - MyBatis란?
- 4장
  - [Lombok 이란?](#Lombok-이란?)
  - [Service 인터페이스와 ServiceImpl 클래스를 분리](#Service-인터페이스와-ServiceImpl-클래스를-분리)

# 2장

## 파일구조의 의미

| 프로젝트의 주요 파일 및 구조      | 의미                                                         |
| --------------------------------- | ------------------------------------------------------------ |
| src/main/java                     | 자바 소스 디렉터리                                           |
| SampleApplication.class           | 애플리케이션을 시작할 수 있는 main 메서드가 존재하는 스프링 구성 메인 클래스 |
| templates                         | 스프링 부트에서 사용 가능한 여러 가지 뷰 탬플릿(Thymeleaf, Velocity, FreeMarker 등등 ) 파일 위치 |
| static                            | 스타일 시트, 자바스크립트, 이미지 등의 정적 리소스 디렉터리  |
| application.properties(or yml)    | 애플리케이션 및 스프링의 설정 등에서 사용할 여러 가지 프로퍼티(property) 정의 |
| Project and External Dependencies | 그레이들 또는 메이븐에서 명시한 프로젝트의 필수 라이브러리 모음 |
| src                               | JSP 등 리소스 디렉터리                                       |
| build.gradel Or pom.xml           | 빌드 명세, 프로젝트에 필요한 라이브러리 관리, 빌드 및 배포 설정 |





## 어노테이션 설명

### @RestController

- 어노테이션을 이용하여 해당 클래스가 REST 컨트롤러 기능을 수행하도록 한다.

### @RequestMapping

- 어노테이션은 해당 메서드를 실행할 수 있는 주소를 설정한다. 

  ```java
  @RequestMapping("/home")
  public String hello(){
      return "home";
  }
  ```

- 위의 코드에서 "/home"이라는 주소를 입력했다. 이는 즉 url에서 home라는 주소의 호출은 이 메소드 (class에도 @RequestMapping을 적용할 수 있음)를 실행한다는 의미이다.

### [@SpringBootApplication](#@SpringBootApplication)





## SampleApplication 클래스

- SampleApllication 클래스(스프링 실행 클래스)는 스프링 부트 애플리케이션의 구성과 실행을 담당하는 중요한 클래스이다.
- 스프링 부트의 장점 중 하나는 자동 구성으로 기존의 복합한 구성, 설정을 제거하고 최소한의 설정으로 바로 실행 가능한 애플리케이션을 만들어 준다는 점이다.

### @SpringBootApplication

이 어노테이션은 스프링 부트의 핵심 어노테이션으로 세 개의 스프링 부트 어노테이션으로 구성 되어 있다.

- @EnableAutoConfiguration

  - 이 어노테이션을 사용하기만 하면 스프링의 다양한 설정이 자동으로 완료된다.( 어떤이는 마법의 어노테이션이라고 극찬하기도...)

  

- @ComponentScan

  - 기존의 스프링은 빈(Bean) 클래스를 사용하기 위해서 XML에 일일이 빈을 선언해 줘야 사용할 수 있었다.
  - but, 이 어노테이션은 Component 검색 기능을 활성화해서 자동으로 컴포넌트 클래스를 검색하고(@Component가 있는 클래스를 탐색),  
  - 검색된 컴포넌트 및 빈 클래스를 스프링 애플리케이션 컨텍스트에 등록하는 역활을 한다. 

  

- @Configuration

  - @SpringBootApplication 어노테이션은 엄밀히 말해 @Configuration이라는 어노테이션을 포함하고 있지 않다.
  - 대신에, @SpringBootConfiguration이라는 어노테이션이 포함되어있고, 이 어노테이션에 @Configuration이 포함되어 있다.
  - @Configuration이 붙은 자바 클래스는 자바 기반 설정 파일임을 의미한다.
    - 스프링 3.x 버전 까지는 자바 기반의 설정이 불가능하였다.
    - 따라서 XML 기반의 설정에 오랜 시간을 투자해야 했다.





# 3장 (스프링 프레임워크 이해하기)



## 스프링 프레임워크란?

| 프로젝트 이름     | 설명                                                         |
| ----------------- | :----------------------------------------------------------- |
| 스프링 프레임워크 | 자바 기반의 애플리케이션을 개발하는 데 기반이 되는 프레임워크. 스프링의 핵심은 애플리케이션의 기반을 제공함으로써 개발자들은 비즈니스 로직의 개발에만 집중할 수 있게 하는데 있다. |
| 스프링 부트       | 스프링 프레임워크를 기반으로 바로 실행 가능한 애플리케이션을 쉽게 만들도록 도와준다. 대부분의 복잡한 스프링 관련 설정을 자동으로 처리, 개발자는 최소한의 설정만 하면 된다. |
| 스프링 데이터     | 스프링 애플리케이션에서 다양한 데이터베이스, JPA 등의 데이터 접근 기술을 쉽게 사용할 수 있도록 도와준다. 스프링 데이터는 하나의 상위 프로젝트로 세부적으로 데이터베이스 종류에 따라서 수많은 하위 프로젝트가 존재 |
| 스프링 시큐리티   | 자바 애플리케이션에 인증(Authentication) 및 권한(Authorization)에 특화된 프레임워크 |
| 스프링 소셜       | 페이스북, 트위터, 링크드인과 같은 소셜 서비스 API와 쉽게 연동할 수 있게 도와준다. |

> 설명 중에서 몇몇 단어들이 좀 어색하거나 이상하다.  추후에 다시 바꾸도록하자....



## MVC 패턴 및 스프링 MVC

- MVC

  - Model  =>  애플리케이션의 정보, 즉 데이터를 의미

  - View   =>  사용자 인터페이스, 즉 사용자가 보고 사용하는 화면 등을 의미

  - Controller   =>  모델과 뷰의 중계자 역활. 사용자의 요청을 파악하고 그에 맞는 결과를 사용자에게 돌려준다.

    

- MVC 패턴도 모델1과 모델 2가 있지만 최근에는 대부분 모델 2를 사용

  

- MVC 패턴을 사용하면 사용자 인터페이스와 비즈니스 로직을 분리하여 개발 가능

  - 서로의 영향을 최소화



### 스프링 웹 MVC의 구조

각 컨트롤러에 필요한 코드가 작성되기 때문에 어쩔 수 없이 일부 코드가 중복되는 등의 문제가 있다. 이러한 문제를 해결하기 위한 방식이  '프론트 컨트롤러' 방식이다.

프론트 컨트롤러는 컨트롤러 앞에 존재하는 컨트롤러로 모든 흐름의 제어를 담당한다.

스프링 웹 MVC의 디스패처 서블릿은 다음과 같다.

> ​	[마크다운 그래프, 차트 사용법](http://morethanair.com/archives/404) ~~차트로 할려고 했으나 귀찮아서 그림으로 대체~~

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fk.kakaocdn.net%2Fdn%2Fcf4UuH%2FbtqwzzFq6qt%2FvW3tGhrR4UzTTyjCgWL3J0%2Fimg.jpg)



스프링 MVC에서는 디스패처 서블릿이 프론트 컨트롤러의 역활을 한다. 여기서 중요한 단어가 나오는데, 'delegate(위임하다)'이다. 

전체 로직 중 일부를 컨트롤러에 위임하고 앞의 ==프론트 컨트롤러는 흐름의 제어를 담당==한다. 또한, 컨트롤러에서는 결과값의 반환을 프론트 컨트롤러에 위임한다. 

이 경우 ==사용자 요청을 처리할 수 있는 컨트롤러의 호출은 프론트 컨트롤러가 담당==하고 개발자는 요청에 대한 적절한 처리만 하면 되므로 작성할 코드가 적어진다.



### 일반적으로 사용하는 스프링 MVC의 구조

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fk.kakaocdn.net%2Fdn%2Fd294ju%2Fbtqwzy0U9uM%2FiCTO7DkDcUefRHWLuIyBH0%2Fimg.jpg)

| 영역       | 역할                                                         |
| ---------- | ------------------------------------------------------------ |
| View       | 사용자가 보는 화면 또는 결과를 의미한다.                     |
| Controller | 사용자가 웹브라우저를 통해서 어떠한 요청을 하면 그 요청을 처리할 컨트롤러를 호출하게 된다. 컨트롤러는 사용자의 요청을 처리하기 위한 비즈니스 로직을 호출하고 그 결과값을 사용자에게 전달해 주는 역활을 한다. |
| Service    | 사용자의 요청을 처리하기 위한 비즈니스 로직이 수행된다. 일반적으로 서비스 영역은 서비스 인테페이스와 이 인터페이스의 구현체로 나뉜다. |
| DAO        | Data Access Object의 약자로 데이터베이스에 접속해서 비즈니스 로직 실행에 필요한 쿼리를 호출한다. |
| DB         | 데이터베이스를 의미한다. 데이터베이스에는 애플리케이션에서 발생한 모든 정보가 저장되어 있다. |





## MyBatis

마이바티스(MyBatis)는 쿼리 기반 웹 앱을 개발할 때 가장 많이 사용되는 SQL 매퍼(Mapper) 프레임워크이다.

MyBatis를  사용하지 않고  직접 JDBC를 이용할 경우 개발자가 반복적으로 작성해야 할 코드가 많고, 서비스 로직 코드와 쿼리를 분리하기 어렵다. 또한 커넥션 풀의 설정 등 개발자가 신경 써야 할 부분이 많다.

>MyBatis 홈페이지의 설명
>
>MyBatis는 개발자가 지정한 SQL, 지장프로시저 그리고 몇 가지 고급 매핑을 지원하는 퍼시스턴스 프레임워크이다. MyBatis는 JDBC로 처리하는 상당부분의 코드와 파라미터 설정 및 결과 매핑을 대신해 준다. MyBatis는 데이터베이스 레코드에 원시타입과 Map 인터페이스 그리고 자바 POJO를  설정해서 매핑하기 위해 XML과 어노테이션을 사용할 수 있다.



### MyBatis란?

MyBatis는 기존의 JDBC를 이용하여 개발하는 방식에 비해 개발자의 부담을 덜어 주고 생산성을 향상시켜 준다. 

JDBC를 이용하여 프로그래밍을 하는 방식은 클래스나 JSP와 같은 코드 안에 SQL문을 작성하는 방식이었다. 따라서 SQL의 변경 등이 발생할 경우 프로그램을 수정해야 하기 때문에 유연성이 좋지 못하고 여러가지 코드가  섞여 있어 가독성이 좋지 못했다.

MyBatis에서는 SQL을 XML 파일에 작성하기 때문에 , SQL의 변환이 자유롭고 가독성도 좋다는 장점이 있다.







# 4장

## Lombok 이란?

롬복은 자바 클래스를 만들 때 흔히 만드는 코드들(getter, settter)은 어노테이션을 이용해서 자동으로 만들어 주는 라이브러리이다. 흔히 DTO같은 모델에서 항상 만들게 되는 getter, setter와 자주 만들게 되는 toString, equals, hashCode와 같은 코드들을 자동으로 만들어 준다.

>DTO(VO)와 맵(Map)
>
>데이터 전송 객체로 DTO 또는 VO(Value Object, DTO와 VO는 다른 개념이지만 많은 사람들이 동일한 의미로 잘못 사용하고 있다.)와 Map 중 어떤 것을 사용해야 하는지에 대한 논쟁은 오래전부터 이어져 왔다. 인터넷에서 "dto vs. map"으로 검색하면 이와 관련된 논쟁을 국내외를 막론하고 심심치 않게 찾아 볼 수 있다. 각각의 방식이 모두 장점과 단점을 가지고 있기 때문에 한때는 프로젝트마다 각자 편한 방식을 사용했지만, 요즘에는 맵은 잘 사용하지 않는다. 



## Service 인터페이스와 ServiceImpl 클래스를 분리

인터페이스를 실제로 구현하는 클래스와 인터페이스로 분리할 경우 여러 가지 장점이 있다.

- 느슨한 결함(loose coupling)을 유지하여 각 기능 간의 의존관계를 최소화한다.
- 의존관계의 최소화로 인해 기능의 변화에도 최소한의 수정으로 개발할 수 있는 유연함을 가질 수 있다.
- 모듈화를 통해 어디서든 사용할 수 있도록 하여 재사용성을 높인다.
- 스프링의 Ioc/DI  (Inversion of Control  /   Dependency Injection) 기능을 이용한 빈 관리 기능을 사용할 수 있다.





